@use 'sass:map';

$background-map: (
  primary: var(--background-primary),
  below-primary: var(--background-below-primary),
  secondary: var(--background-secondary),
  surface-0: var(--surface-level-0),
  surface-1: var(--surface-level-1),
  surface-2: var(--surface-level-2),
  surface-3: var(--surface-level-3),
  error: var(--background-below-error),
  success: var(--background-below-success),
);

$blur-map: (
  sm: 0.375rem,
  md: 0.75rem,
  lg: 1.5rem,
);

@function get-background($variant) {
  @if not map.has-key($background-map, $variant) {
    @error "Invalid background variant `#{$variant}`. Allowed: #{map.keys($background-map)}.";
  }
  @return map.get($background-map, $variant);
}

@mixin background($variant, $opacity: null, $backdrop-blur: null) {
  $bg: get-background($variant);

  @if $opacity == null {
    background: $bg;
  } @else {
    background: oklch(from #{$bg} l c h / #{$opacity});

    @if $backdrop-blur != null {
      @if not map.has-key($blur-map, $backdrop-blur) {
        @error "Invalid blur size `#{$backdrop-blur}`. Allowed: #{map.keys($blur-map)}.";
      }

      backdrop-filter: blur(map.get($blur-map, $backdrop-blur));
    }
  }
}
